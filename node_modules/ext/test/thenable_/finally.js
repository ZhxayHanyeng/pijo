"use strict";

var assert        = require("chai").assert
  , sinon         = require("sinon")
  , identity      = require("../../function/identity")
  , finallyMethod = require("../../thenable_/finally");

var throwUnexpected = function () { throw new Error("Unexpected"); };

describe("thenable_/finally", function () {
	describe("Successful on fulfilled", function () {
		var callback, input, result;

		before(function () {
			callback = sinon.fake();
			input = Promise.resolve("foo");
			result = finallyMethod.call(input, callback);
			return result;
		});

		it("Should invoke finally callback", function () { assert(callback.calledOnce); });

		it("Return promise should fulfill with original result", function () {
			return Promise.all([